"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4";
exports.ids = ["vendor-chunks/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4/node_modules/@toruslabs/metadata-helpers/dist/metadataHelpers.esm.js":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4/node_modules/@toruslabs/metadata-helpers/dist/metadataHelpers.esm.js ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptData: () => (/* binding */ decryptData),\n/* harmony export */   \"default\": () => (/* binding */ MetadataStorageLayer),\n/* harmony export */   ec: () => (/* binding */ ec),\n/* harmony export */   encParamsBufToHex: () => (/* binding */ encParamsBufToHex),\n/* harmony export */   encParamsHexToBuf: () => (/* binding */ encParamsHexToBuf),\n/* harmony export */   encryptAndSetData: () => (/* binding */ encryptAndSetData),\n/* harmony export */   encryptData: () => (/* binding */ encryptData),\n/* harmony export */   getAndDecryptData: () => (/* binding */ getAndDecryptData),\n/* harmony export */   getDeviceShare: () => (/* binding */ getDeviceShare),\n/* harmony export */   getTorusShare: () => (/* binding */ getTorusShare),\n/* harmony export */   keccak256: () => (/* binding */ keccak256),\n/* harmony export */   setDeviceShare: () => (/* binding */ setDeviceShare),\n/* harmony export */   setTorusShare: () => (/* binding */ setTorusShare)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/objectSpread2 */ \"(ssr)/./node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/objectSpread2.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"(ssr)/./node_modules/.pnpm/@babel+runtime@7.28.4/node_modules/@babel/runtime/helpers/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @toruslabs/http-helpers */ \"(ssr)/./node_modules/.pnpm/@toruslabs+http-helpers@6.1.1_@babel+runtime@7.28.4/node_modules/@toruslabs/http-helpers/dist/httpHelpers.esm.js\");\n/* harmony import */ var json_stable_stringify__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! json-stable-stringify */ \"(ssr)/./node_modules/.pnpm/json-stable-stringify@1.3.0/node_modules/json-stable-stringify/index.js\");\n/* harmony import */ var json_stable_stringify__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(json_stable_stringify__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! elliptic */ \"(ssr)/./node_modules/.pnpm/elliptic@6.6.1/node_modules/elliptic/lib/elliptic.js\");\n/* harmony import */ var elliptic__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(elliptic__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var ethereum_cryptography_keccak__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ethereum-cryptography/keccak */ \"(ssr)/./node_modules/.pnpm/ethereum-cryptography@2.2.1/node_modules/ethereum-cryptography/esm/keccak.js\");\n/* harmony import */ var _toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @toruslabs/eccrypto */ \"(ssr)/./node_modules/.pnpm/@toruslabs+eccrypto@4.0.0/node_modules/@toruslabs/eccrypto/dist/eccrypto.esm.js\");\n\n\n\n\n\n\n\n\nfunction keccak256(a) {\n  return Buffer.from((0,ethereum_cryptography_keccak__WEBPACK_IMPORTED_MODULE_5__.keccak256)(a));\n}\nconst ec = new elliptic__WEBPACK_IMPORTED_MODULE_4__.ec(\"secp256k1\");\n\nclass MetadataStorageLayer {\n  // ms\n\n  constructor() {\n    let metadataHost = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"https://metadata.tor.us\";\n    let serverTimeOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"metadataHost\", void 0);\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(this, \"serverTimeOffset\", void 0);\n    this.metadataHost = metadataHost;\n    this.serverTimeOffset = serverTimeOffset;\n  }\n  static setAPIKey(apiKey) {\n    (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.setAPIKey)(apiKey);\n  }\n  static setEmbedHost(embedHost) {\n    (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.setEmbedHost)(embedHost);\n  }\n  generateMetadataParams(message, privateKeyHex) {\n    var _sig$recoveryParam$to, _sig$recoveryParam;\n    const key = ec.keyFromPrivate(privateKeyHex, \"hex\");\n    const setData = {\n      data: message,\n      timestamp: Math.floor(this.serverTimeOffset + Date.now() / 1000).toString(16)\n    };\n    const sig = key.sign(keccak256(Buffer.from(json_stable_stringify__WEBPACK_IMPORTED_MODULE_3___default()(setData), \"utf8\")));\n    return {\n      pub_key_X: key.getPublic().getX().toString(16, 64),\n      pub_key_Y: key.getPublic().getY().toString(16, 64),\n      set_data: setData,\n      signature: Buffer.from(sig.r.toString(16, 64) + sig.s.toString(16, 64) + ((_sig$recoveryParam$to = (_sig$recoveryParam = sig.recoveryParam) === null || _sig$recoveryParam === void 0 ? void 0 : _sig$recoveryParam.toString(16).padStart(2, \"0\").slice(-2)) !== null && _sig$recoveryParam$to !== void 0 ? _sig$recoveryParam$to : \"00\"), \"hex\").toString(\"base64\")\n    };\n  }\n  generatePubKeyParams(privateKeyHex) {\n    const key = ec.keyFromPrivate(privateKeyHex, \"hex\");\n    return {\n      pub_key_X: key.getPublic().getX().toString(16, 64),\n      pub_key_Y: key.getPublic().getY().toString(16, 64)\n    };\n  }\n  async setMetadata(data, namespace, options) {\n    const params = namespace !== null ? _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, data), {}, {\n      namespace\n    }) : data;\n    const metadataResponse = await (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.post)(`${this.metadataHost}/set`, params, options, {\n      useAPIKey: true\n    });\n    return metadataResponse.message;\n  }\n  async getMetadata(pubKey, namespace, options) {\n    const params = namespace !== null ? _babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_0___default()({}, pubKey), {}, {\n      namespace\n    }) : pubKey;\n    const metadataResponse = await (0,_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_2__.post)(`${this.metadataHost}/get`, params, options, {\n      useAPIKey: true\n    });\n    return metadataResponse.message;\n  }\n}\n\nconst WEBAUTHN_TORUS_SHARE = \"webauthn_torus_share\";\nconst WEBAUTHN_DEVICE_SHARE = \"webauthn_device_share\";\nfunction encParamsHexToBuf(encParamsHex) {\n  return {\n    iv: Buffer.from(encParamsHex.iv, \"hex\"),\n    ephemPublicKey: Buffer.from(encParamsHex.ephemPublicKey, \"hex\"),\n    ciphertext: Buffer.from(encParamsHex.ciphertext, \"hex\"),\n    mac: Buffer.from(encParamsHex.mac, \"hex\")\n  };\n}\nfunction encParamsBufToHex(encParams) {\n  return {\n    iv: Buffer.from(encParams.iv).toString(\"hex\"),\n    ephemPublicKey: Buffer.from(encParams.ephemPublicKey).toString(\"hex\"),\n    ciphertext: Buffer.from(encParams.ciphertext).toString(\"hex\"),\n    mac: Buffer.from(encParams.mac).toString(\"hex\")\n  };\n}\nasync function encryptData(privKeyHex, d) {\n  const serializedDec = JSON.stringify(d);\n  const serializedBuf = Buffer.from(serializedDec, \"utf-8\");\n  const encParams = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.encrypt)((0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.getPublic)(Buffer.from(privKeyHex, \"hex\")), serializedBuf);\n  const encParamsHex = encParamsBufToHex(encParams);\n  const sData = JSON.stringify(encParamsHex);\n  return sData;\n}\nasync function decryptData(privKeyHex, d) {\n  const encParamsHex = JSON.parse(d);\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = ec.keyFromPrivate(privKeyHex);\n  const serializedBuf = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.decrypt)(Buffer.from(keyPair.getPrivate().toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedDec = serializedBuf.toString(\"utf-8\");\n  const data = JSON.parse(serializedDec);\n  return data;\n}\nasync function getAndDecryptData(m, privKeyHex, namespace) {\n  const keyPair = ec.keyFromPrivate(privKeyHex, \"hex\");\n  const pubKey = keyPair.getPublic();\n  const serializedData = await m.getMetadata({\n    pub_key_X: pubKey.getX().toString(16, 64),\n    pub_key_Y: pubKey.getY().toString(16, 64)\n  }, namespace);\n  if (!serializedData) {\n    return null;\n  }\n  const data = await decryptData(privKeyHex, serializedData);\n  return data;\n}\nasync function encryptAndSetData(m, privKeyHex, d, namespace) {\n  const sData = await encryptData(privKeyHex, d);\n  const metadataParams = m.generateMetadataParams(sData, privKeyHex);\n  await m.setMetadata(metadataParams, namespace);\n}\nasync function setTorusShare(m, webAuthnPubKey, webAuthnRefHex, subspace, subspaceData) {\n  const refKeyPair = ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = refKeyPair.getPrivate();\n  const pubKey = ec.keyFromPublic({\n    x: webAuthnPubKey.pub_key_X,\n    y: webAuthnPubKey.pub_key_Y\n  });\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  let d = {};\n  if (data) d = data;\n  const serializedSubspaceData = JSON.stringify(subspaceData);\n  const serializedSubspaceDataBuf = Buffer.from(serializedSubspaceData, \"utf-8\");\n  const encSubspaceData = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.encrypt)(Buffer.from(pubKey.getPublic(\"hex\"), \"hex\"), serializedSubspaceDataBuf);\n  const encSubspaceDataHex = encParamsBufToHex(encSubspaceData);\n  d[subspace] = encSubspaceDataHex;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_TORUS_SHARE);\n}\nasync function setDeviceShare(m, webAuthnRefHex, subspace, subspaceData) {\n  const keyPair = ec.keyFromPrivate(webAuthnRefHex);\n  const privKey = keyPair.getPrivate();\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  let d = {};\n  if (data) d = data;\n  d[subspace] = subspaceData;\n  await encryptAndSetData(m, privKey.toString(\"hex\", 64), d, WEBAUTHN_DEVICE_SHARE);\n}\nasync function getTorusShare(m, webAuthnKeyHex, webAuthnRefHex, subspace) {\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_TORUS_SHARE);\n  if (!data) return null;\n  const encParamsHex = data[subspace];\n  if (!encParamsHex) return null;\n  const encParams = encParamsHexToBuf(encParamsHex);\n  const keyPair = ec.keyFromPrivate(webAuthnKeyHex);\n  const privKey = keyPair.getPrivate();\n  const serializedSubspaceDataBuf = await (0,_toruslabs_eccrypto__WEBPACK_IMPORTED_MODULE_6__.decrypt)(Buffer.from(privKey.toString(\"hex\", 64), \"hex\"), encParams);\n  const serializedSubspaceData = serializedSubspaceDataBuf.toString(\"utf-8\");\n  const subspaceData = JSON.parse(serializedSubspaceData);\n  return subspaceData;\n}\nasync function getDeviceShare(m, webAuthnRefHex, subspace) {\n  const data = await getAndDecryptData(m, webAuthnRefHex, WEBAUTHN_DEVICE_SHARE);\n  if (data) return data[subspace];\n  return null;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHRvcnVzbGFicyttZXRhZGF0YS1oZWxwZXJzQDUuMS4wX0BiYWJlbCtydW50aW1lQDcuMjguNC9ub2RlX21vZHVsZXMvQHRvcnVzbGFicy9tZXRhZGF0YS1oZWxwZXJzL2Rpc3QvbWV0YWRhdGFIZWxwZXJzLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUU7QUFDRztBQUNJO0FBQzFCO0FBQ1I7QUFDa0M7QUFDTjs7QUFFbEU7QUFDQSxxQkFBcUIsdUVBQVc7QUFDaEM7QUFDQSxlQUFlLHdDQUFJOztBQUVuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUksNEVBQWU7QUFDbkIsSUFBSSw0RUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0EsSUFBSSxxRUFBWTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDREQUFTO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywyRUFBYSxDQUFDLDJFQUFhLEdBQUcsV0FBVztBQUNqRjtBQUNBLEtBQUs7QUFDTCxtQ0FBbUMsNkRBQUksSUFBSSxrQkFBa0I7QUFDN0Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDJFQUFhLENBQUMsMkVBQWEsR0FBRyxhQUFhO0FBQ25GO0FBQ0EsS0FBSztBQUNMLG1DQUFtQyw2REFBSSxJQUFJLGtCQUFrQjtBQUM3RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDREQUFPLENBQUMsOERBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw0REFBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNERBQU87QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLDREQUFPO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFOE4iLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbWFyZ3JcXGNhbXB1cy1wMnAtbWFya2V0cGxhY2VcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEB0b3J1c2xhYnMrbWV0YWRhdGEtaGVscGVyc0A1LjEuMF9AYmFiZWwrcnVudGltZUA3LjI4LjRcXG5vZGVfbW9kdWxlc1xcQHRvcnVzbGFic1xcbWV0YWRhdGEtaGVscGVyc1xcZGlzdFxcbWV0YWRhdGFIZWxwZXJzLmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDInO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5JztcbmltcG9ydCB7IHNldEFQSUtleSwgc2V0RW1iZWRIb3N0LCBwb3N0IH0gZnJvbSAnQHRvcnVzbGFicy9odHRwLWhlbHBlcnMnO1xuaW1wb3J0IHN0cmluZ2lmeSBmcm9tICdqc29uLXN0YWJsZS1zdHJpbmdpZnknO1xuaW1wb3J0IHsgZWMgYXMgZWMkMSB9IGZyb20gJ2VsbGlwdGljJztcbmltcG9ydCB7IGtlY2NhazI1NiBhcyBrZWNjYWsyNTYkMSB9IGZyb20gJ2V0aGVyZXVtLWNyeXB0b2dyYXBoeS9rZWNjYWsnO1xuaW1wb3J0IHsgZW5jcnlwdCwgZ2V0UHVibGljLCBkZWNyeXB0IH0gZnJvbSAnQHRvcnVzbGFicy9lY2NyeXB0byc7XG5cbmZ1bmN0aW9uIGtlY2NhazI1NihhKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShrZWNjYWsyNTYkMShhKSk7XG59XG5jb25zdCBlYyA9IG5ldyBlYyQxKFwic2VjcDI1NmsxXCIpO1xuXG5jbGFzcyBNZXRhZGF0YVN0b3JhZ2VMYXllciB7XG4gIC8vIG1zXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG1ldGFkYXRhSG9zdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogXCJodHRwczovL21ldGFkYXRhLnRvci51c1wiO1xuICAgIGxldCBzZXJ2ZXJUaW1lT2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhSG9zdFwiLCB2b2lkIDApO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlcnZlclRpbWVPZmZzZXRcIiwgdm9pZCAwKTtcbiAgICB0aGlzLm1ldGFkYXRhSG9zdCA9IG1ldGFkYXRhSG9zdDtcbiAgICB0aGlzLnNlcnZlclRpbWVPZmZzZXQgPSBzZXJ2ZXJUaW1lT2Zmc2V0O1xuICB9XG4gIHN0YXRpYyBzZXRBUElLZXkoYXBpS2V5KSB7XG4gICAgc2V0QVBJS2V5KGFwaUtleSk7XG4gIH1cbiAgc3RhdGljIHNldEVtYmVkSG9zdChlbWJlZEhvc3QpIHtcbiAgICBzZXRFbWJlZEhvc3QoZW1iZWRIb3N0KTtcbiAgfVxuICBnZW5lcmF0ZU1ldGFkYXRhUGFyYW1zKG1lc3NhZ2UsIHByaXZhdGVLZXlIZXgpIHtcbiAgICB2YXIgX3NpZyRyZWNvdmVyeVBhcmFtJHRvLCBfc2lnJHJlY292ZXJ5UGFyYW07XG4gICAgY29uc3Qga2V5ID0gZWMua2V5RnJvbVByaXZhdGUocHJpdmF0ZUtleUhleCwgXCJoZXhcIik7XG4gICAgY29uc3Qgc2V0RGF0YSA9IHtcbiAgICAgIGRhdGE6IG1lc3NhZ2UsXG4gICAgICB0aW1lc3RhbXA6IE1hdGguZmxvb3IodGhpcy5zZXJ2ZXJUaW1lT2Zmc2V0ICsgRGF0ZS5ub3coKSAvIDEwMDApLnRvU3RyaW5nKDE2KVxuICAgIH07XG4gICAgY29uc3Qgc2lnID0ga2V5LnNpZ24oa2VjY2FrMjU2KEJ1ZmZlci5mcm9tKHN0cmluZ2lmeShzZXREYXRhKSwgXCJ1dGY4XCIpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHB1Yl9rZXlfWDoga2V5LmdldFB1YmxpYygpLmdldFgoKS50b1N0cmluZygxNiwgNjQpLFxuICAgICAgcHViX2tleV9ZOiBrZXkuZ2V0UHVibGljKCkuZ2V0WSgpLnRvU3RyaW5nKDE2LCA2NCksXG4gICAgICBzZXRfZGF0YTogc2V0RGF0YSxcbiAgICAgIHNpZ25hdHVyZTogQnVmZmVyLmZyb20oc2lnLnIudG9TdHJpbmcoMTYsIDY0KSArIHNpZy5zLnRvU3RyaW5nKDE2LCA2NCkgKyAoKF9zaWckcmVjb3ZlcnlQYXJhbSR0byA9IChfc2lnJHJlY292ZXJ5UGFyYW0gPSBzaWcucmVjb3ZlcnlQYXJhbSkgPT09IG51bGwgfHwgX3NpZyRyZWNvdmVyeVBhcmFtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2lnJHJlY292ZXJ5UGFyYW0udG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKS5zbGljZSgtMikpICE9PSBudWxsICYmIF9zaWckcmVjb3ZlcnlQYXJhbSR0byAhPT0gdm9pZCAwID8gX3NpZyRyZWNvdmVyeVBhcmFtJHRvIDogXCIwMFwiKSwgXCJoZXhcIikudG9TdHJpbmcoXCJiYXNlNjRcIilcbiAgICB9O1xuICB9XG4gIGdlbmVyYXRlUHViS2V5UGFyYW1zKHByaXZhdGVLZXlIZXgpIHtcbiAgICBjb25zdCBrZXkgPSBlYy5rZXlGcm9tUHJpdmF0ZShwcml2YXRlS2V5SGV4LCBcImhleFwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgcHViX2tleV9YOiBrZXkuZ2V0UHVibGljKCkuZ2V0WCgpLnRvU3RyaW5nKDE2LCA2NCksXG4gICAgICBwdWJfa2V5X1k6IGtleS5nZXRQdWJsaWMoKS5nZXRZKCkudG9TdHJpbmcoMTYsIDY0KVxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2V0TWV0YWRhdGEoZGF0YSwgbmFtZXNwYWNlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcGFyYW1zID0gbmFtZXNwYWNlICE9PSBudWxsID8gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKSwge30sIHtcbiAgICAgIG5hbWVzcGFjZVxuICAgIH0pIDogZGF0YTtcbiAgICBjb25zdCBtZXRhZGF0YVJlc3BvbnNlID0gYXdhaXQgcG9zdChgJHt0aGlzLm1ldGFkYXRhSG9zdH0vc2V0YCwgcGFyYW1zLCBvcHRpb25zLCB7XG4gICAgICB1c2VBUElLZXk6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gbWV0YWRhdGFSZXNwb25zZS5tZXNzYWdlO1xuICB9XG4gIGFzeW5jIGdldE1ldGFkYXRhKHB1YktleSwgbmFtZXNwYWNlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcGFyYW1zID0gbmFtZXNwYWNlICE9PSBudWxsID8gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwdWJLZXkpLCB7fSwge1xuICAgICAgbmFtZXNwYWNlXG4gICAgfSkgOiBwdWJLZXk7XG4gICAgY29uc3QgbWV0YWRhdGFSZXNwb25zZSA9IGF3YWl0IHBvc3QoYCR7dGhpcy5tZXRhZGF0YUhvc3R9L2dldGAsIHBhcmFtcywgb3B0aW9ucywge1xuICAgICAgdXNlQVBJS2V5OiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG1ldGFkYXRhUmVzcG9uc2UubWVzc2FnZTtcbiAgfVxufVxuXG5jb25zdCBXRUJBVVRITl9UT1JVU19TSEFSRSA9IFwid2ViYXV0aG5fdG9ydXNfc2hhcmVcIjtcbmNvbnN0IFdFQkFVVEhOX0RFVklDRV9TSEFSRSA9IFwid2ViYXV0aG5fZGV2aWNlX3NoYXJlXCI7XG5mdW5jdGlvbiBlbmNQYXJhbXNIZXhUb0J1ZihlbmNQYXJhbXNIZXgpIHtcbiAgcmV0dXJuIHtcbiAgICBpdjogQnVmZmVyLmZyb20oZW5jUGFyYW1zSGV4Lml2LCBcImhleFwiKSxcbiAgICBlcGhlbVB1YmxpY0tleTogQnVmZmVyLmZyb20oZW5jUGFyYW1zSGV4LmVwaGVtUHVibGljS2V5LCBcImhleFwiKSxcbiAgICBjaXBoZXJ0ZXh0OiBCdWZmZXIuZnJvbShlbmNQYXJhbXNIZXguY2lwaGVydGV4dCwgXCJoZXhcIiksXG4gICAgbWFjOiBCdWZmZXIuZnJvbShlbmNQYXJhbXNIZXgubWFjLCBcImhleFwiKVxuICB9O1xufVxuZnVuY3Rpb24gZW5jUGFyYW1zQnVmVG9IZXgoZW5jUGFyYW1zKSB7XG4gIHJldHVybiB7XG4gICAgaXY6IEJ1ZmZlci5mcm9tKGVuY1BhcmFtcy5pdikudG9TdHJpbmcoXCJoZXhcIiksXG4gICAgZXBoZW1QdWJsaWNLZXk6IEJ1ZmZlci5mcm9tKGVuY1BhcmFtcy5lcGhlbVB1YmxpY0tleSkudG9TdHJpbmcoXCJoZXhcIiksXG4gICAgY2lwaGVydGV4dDogQnVmZmVyLmZyb20oZW5jUGFyYW1zLmNpcGhlcnRleHQpLnRvU3RyaW5nKFwiaGV4XCIpLFxuICAgIG1hYzogQnVmZmVyLmZyb20oZW5jUGFyYW1zLm1hYykudG9TdHJpbmcoXCJoZXhcIilcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuY3J5cHREYXRhKHByaXZLZXlIZXgsIGQpIHtcbiAgY29uc3Qgc2VyaWFsaXplZERlYyA9IEpTT04uc3RyaW5naWZ5KGQpO1xuICBjb25zdCBzZXJpYWxpemVkQnVmID0gQnVmZmVyLmZyb20oc2VyaWFsaXplZERlYywgXCJ1dGYtOFwiKTtcbiAgY29uc3QgZW5jUGFyYW1zID0gYXdhaXQgZW5jcnlwdChnZXRQdWJsaWMoQnVmZmVyLmZyb20ocHJpdktleUhleCwgXCJoZXhcIikpLCBzZXJpYWxpemVkQnVmKTtcbiAgY29uc3QgZW5jUGFyYW1zSGV4ID0gZW5jUGFyYW1zQnVmVG9IZXgoZW5jUGFyYW1zKTtcbiAgY29uc3Qgc0RhdGEgPSBKU09OLnN0cmluZ2lmeShlbmNQYXJhbXNIZXgpO1xuICByZXR1cm4gc0RhdGE7XG59XG5hc3luYyBmdW5jdGlvbiBkZWNyeXB0RGF0YShwcml2S2V5SGV4LCBkKSB7XG4gIGNvbnN0IGVuY1BhcmFtc0hleCA9IEpTT04ucGFyc2UoZCk7XG4gIGNvbnN0IGVuY1BhcmFtcyA9IGVuY1BhcmFtc0hleFRvQnVmKGVuY1BhcmFtc0hleCk7XG4gIGNvbnN0IGtleVBhaXIgPSBlYy5rZXlGcm9tUHJpdmF0ZShwcml2S2V5SGV4KTtcbiAgY29uc3Qgc2VyaWFsaXplZEJ1ZiA9IGF3YWl0IGRlY3J5cHQoQnVmZmVyLmZyb20oa2V5UGFpci5nZXRQcml2YXRlKCkudG9TdHJpbmcoXCJoZXhcIiwgNjQpLCBcImhleFwiKSwgZW5jUGFyYW1zKTtcbiAgY29uc3Qgc2VyaWFsaXplZERlYyA9IHNlcmlhbGl6ZWRCdWYudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbiAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZERlYyk7XG4gIHJldHVybiBkYXRhO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QW5kRGVjcnlwdERhdGEobSwgcHJpdktleUhleCwgbmFtZXNwYWNlKSB7XG4gIGNvbnN0IGtleVBhaXIgPSBlYy5rZXlGcm9tUHJpdmF0ZShwcml2S2V5SGV4LCBcImhleFwiKTtcbiAgY29uc3QgcHViS2V5ID0ga2V5UGFpci5nZXRQdWJsaWMoKTtcbiAgY29uc3Qgc2VyaWFsaXplZERhdGEgPSBhd2FpdCBtLmdldE1ldGFkYXRhKHtcbiAgICBwdWJfa2V5X1g6IHB1YktleS5nZXRYKCkudG9TdHJpbmcoMTYsIDY0KSxcbiAgICBwdWJfa2V5X1k6IHB1YktleS5nZXRZKCkudG9TdHJpbmcoMTYsIDY0KVxuICB9LCBuYW1lc3BhY2UpO1xuICBpZiAoIXNlcmlhbGl6ZWREYXRhKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgZGF0YSA9IGF3YWl0IGRlY3J5cHREYXRhKHByaXZLZXlIZXgsIHNlcmlhbGl6ZWREYXRhKTtcbiAgcmV0dXJuIGRhdGE7XG59XG5hc3luYyBmdW5jdGlvbiBlbmNyeXB0QW5kU2V0RGF0YShtLCBwcml2S2V5SGV4LCBkLCBuYW1lc3BhY2UpIHtcbiAgY29uc3Qgc0RhdGEgPSBhd2FpdCBlbmNyeXB0RGF0YShwcml2S2V5SGV4LCBkKTtcbiAgY29uc3QgbWV0YWRhdGFQYXJhbXMgPSBtLmdlbmVyYXRlTWV0YWRhdGFQYXJhbXMoc0RhdGEsIHByaXZLZXlIZXgpO1xuICBhd2FpdCBtLnNldE1ldGFkYXRhKG1ldGFkYXRhUGFyYW1zLCBuYW1lc3BhY2UpO1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0VG9ydXNTaGFyZShtLCB3ZWJBdXRoblB1YktleSwgd2ViQXV0aG5SZWZIZXgsIHN1YnNwYWNlLCBzdWJzcGFjZURhdGEpIHtcbiAgY29uc3QgcmVmS2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHdlYkF1dGhuUmVmSGV4KTtcbiAgY29uc3QgcHJpdktleSA9IHJlZktleVBhaXIuZ2V0UHJpdmF0ZSgpO1xuICBjb25zdCBwdWJLZXkgPSBlYy5rZXlGcm9tUHVibGljKHtcbiAgICB4OiB3ZWJBdXRoblB1YktleS5wdWJfa2V5X1gsXG4gICAgeTogd2ViQXV0aG5QdWJLZXkucHViX2tleV9ZXG4gIH0pO1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QW5kRGVjcnlwdERhdGEobSwgd2ViQXV0aG5SZWZIZXgsIFdFQkFVVEhOX1RPUlVTX1NIQVJFKTtcbiAgbGV0IGQgPSB7fTtcbiAgaWYgKGRhdGEpIGQgPSBkYXRhO1xuICBjb25zdCBzZXJpYWxpemVkU3Vic3BhY2VEYXRhID0gSlNPTi5zdHJpbmdpZnkoc3Vic3BhY2VEYXRhKTtcbiAgY29uc3Qgc2VyaWFsaXplZFN1YnNwYWNlRGF0YUJ1ZiA9IEJ1ZmZlci5mcm9tKHNlcmlhbGl6ZWRTdWJzcGFjZURhdGEsIFwidXRmLThcIik7XG4gIGNvbnN0IGVuY1N1YnNwYWNlRGF0YSA9IGF3YWl0IGVuY3J5cHQoQnVmZmVyLmZyb20ocHViS2V5LmdldFB1YmxpYyhcImhleFwiKSwgXCJoZXhcIiksIHNlcmlhbGl6ZWRTdWJzcGFjZURhdGFCdWYpO1xuICBjb25zdCBlbmNTdWJzcGFjZURhdGFIZXggPSBlbmNQYXJhbXNCdWZUb0hleChlbmNTdWJzcGFjZURhdGEpO1xuICBkW3N1YnNwYWNlXSA9IGVuY1N1YnNwYWNlRGF0YUhleDtcbiAgYXdhaXQgZW5jcnlwdEFuZFNldERhdGEobSwgcHJpdktleS50b1N0cmluZyhcImhleFwiLCA2NCksIGQsIFdFQkFVVEhOX1RPUlVTX1NIQVJFKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHNldERldmljZVNoYXJlKG0sIHdlYkF1dGhuUmVmSGV4LCBzdWJzcGFjZSwgc3Vic3BhY2VEYXRhKSB7XG4gIGNvbnN0IGtleVBhaXIgPSBlYy5rZXlGcm9tUHJpdmF0ZSh3ZWJBdXRoblJlZkhleCk7XG4gIGNvbnN0IHByaXZLZXkgPSBrZXlQYWlyLmdldFByaXZhdGUoKTtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFuZERlY3J5cHREYXRhKG0sIHdlYkF1dGhuUmVmSGV4LCBXRUJBVVRITl9ERVZJQ0VfU0hBUkUpO1xuICBsZXQgZCA9IHt9O1xuICBpZiAoZGF0YSkgZCA9IGRhdGE7XG4gIGRbc3Vic3BhY2VdID0gc3Vic3BhY2VEYXRhO1xuICBhd2FpdCBlbmNyeXB0QW5kU2V0RGF0YShtLCBwcml2S2V5LnRvU3RyaW5nKFwiaGV4XCIsIDY0KSwgZCwgV0VCQVVUSE5fREVWSUNFX1NIQVJFKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFRvcnVzU2hhcmUobSwgd2ViQXV0aG5LZXlIZXgsIHdlYkF1dGhuUmVmSGV4LCBzdWJzcGFjZSkge1xuICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QW5kRGVjcnlwdERhdGEobSwgd2ViQXV0aG5SZWZIZXgsIFdFQkFVVEhOX1RPUlVTX1NIQVJFKTtcbiAgaWYgKCFkYXRhKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgZW5jUGFyYW1zSGV4ID0gZGF0YVtzdWJzcGFjZV07XG4gIGlmICghZW5jUGFyYW1zSGV4KSByZXR1cm4gbnVsbDtcbiAgY29uc3QgZW5jUGFyYW1zID0gZW5jUGFyYW1zSGV4VG9CdWYoZW5jUGFyYW1zSGV4KTtcbiAgY29uc3Qga2V5UGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHdlYkF1dGhuS2V5SGV4KTtcbiAgY29uc3QgcHJpdktleSA9IGtleVBhaXIuZ2V0UHJpdmF0ZSgpO1xuICBjb25zdCBzZXJpYWxpemVkU3Vic3BhY2VEYXRhQnVmID0gYXdhaXQgZGVjcnlwdChCdWZmZXIuZnJvbShwcml2S2V5LnRvU3RyaW5nKFwiaGV4XCIsIDY0KSwgXCJoZXhcIiksIGVuY1BhcmFtcyk7XG4gIGNvbnN0IHNlcmlhbGl6ZWRTdWJzcGFjZURhdGEgPSBzZXJpYWxpemVkU3Vic3BhY2VEYXRhQnVmLnRvU3RyaW5nKFwidXRmLThcIik7XG4gIGNvbnN0IHN1YnNwYWNlRGF0YSA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZFN1YnNwYWNlRGF0YSk7XG4gIHJldHVybiBzdWJzcGFjZURhdGE7XG59XG5hc3luYyBmdW5jdGlvbiBnZXREZXZpY2VTaGFyZShtLCB3ZWJBdXRoblJlZkhleCwgc3Vic3BhY2UpIHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFuZERlY3J5cHREYXRhKG0sIHdlYkF1dGhuUmVmSGV4LCBXRUJBVVRITl9ERVZJQ0VfU0hBUkUpO1xuICBpZiAoZGF0YSkgcmV0dXJuIGRhdGFbc3Vic3BhY2VdO1xuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IHsgZGVjcnlwdERhdGEsIE1ldGFkYXRhU3RvcmFnZUxheWVyIGFzIGRlZmF1bHQsIGVjLCBlbmNQYXJhbXNCdWZUb0hleCwgZW5jUGFyYW1zSGV4VG9CdWYsIGVuY3J5cHRBbmRTZXREYXRhLCBlbmNyeXB0RGF0YSwgZ2V0QW5kRGVjcnlwdERhdGEsIGdldERldmljZVNoYXJlLCBnZXRUb3J1c1NoYXJlLCBrZWNjYWsyNTYsIHNldERldmljZVNoYXJlLCBzZXRUb3J1c1NoYXJlIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@toruslabs+metadata-helpers@5.1.0_@babel+runtime@7.28.4/node_modules/@toruslabs/metadata-helpers/dist/metadataHelpers.esm.js\n");

/***/ })

};
;